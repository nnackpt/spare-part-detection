(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83571,e=>{"use strict";var t=e.i(43476),l=e.i(71645);function r(){let[e,r]=(0,l.useState)(null),s=e?`${e}/stream.mjpg`:void 0,n=(0,l.useMemo)(()=>{if(!e)return"";try{let t=new URL(e);return t.protocol="https:"===t.protocol?"wss:":"ws:",t.pathname="/ws",t.toString()}catch{return""}},[e]),a=(0,l.useRef)(null),o=(0,l.useRef)(null),[c,i]=(0,l.useState)(!1),[d,u]=(0,l.useState)(null),[f,x]=(0,l.useState)(!0),[h,m]=(0,l.useState)(null),[b,g]=(0,l.useState)([]),[p,w]=(0,l.useState)([]);(0,l.useEffect)(()=>{fetch("/config.json").then(e=>e.json()).then(e=>{r(e.apiBase)}).catch(e=>console.error("Error loading config:",e))},[]),(0,l.useEffect)(()=>{m(new Date);let e=setInterval(()=>m(new Date),1e3);return()=>clearInterval(e)},[]),(0,l.useEffect)(()=>{let e=a.current;if(!e)return;let t=()=>{i(!0),x(!1),u(null)},l=()=>{i(!1),x(!1),u("Cannot connect to camera stream")};return e.addEventListener("load",t),e.addEventListener("error",l),()=>{e.removeEventListener("load",t),e.removeEventListener("error",l)}},[]),(0,l.useEffect)(()=>{let e;if(!n)return;let t=!0,l=()=>{let r=new WebSocket(n);o.current=r,r.onopen=()=>{console.log("âœ… WebSocket connected")},r.onmessage=e=>{try{let t=JSON.parse(e.data);if(!("error"in t)&&t.detections){w(t.detections);let e=Array.from(new Set(t.detections.map(e=>e.label)));g(e)}}catch(e){console.error("Failed to parse WS message:",e)}},r.onerror=()=>{console.error("WebSocket error")},r.onclose=r=>{t&&1e3!==r.code&&(e=setTimeout(()=>{t&&l()},3e3))}};return l(),()=>{t=!1,e&&clearTimeout(e),o.current?.close(1e3)}},[n]);let v=p.length>0?p[0]:null;return(0,t.jsxs)("main",{className:"min-h-screen w-full text-gray-100 flex p-4 pt-20 gap-4 bg-[#ffffff]",children:[(0,t.jsx)("div",{className:"flex-[2] flex flex-col",children:(0,t.jsx)("div",{className:"relative h-full rounded-2xl overflow-hidden border border-gray-200 bg-black shadow-sm",children:(0,t.jsx)("img",{ref:a,src:s,alt:"Live camera feed",className:"w-full h-full object-contain"})})}),(0,t.jsx)("div",{className:"flex-1 flex flex-col h-full justify-center py-12",children:(0,t.jsxs)("div",{className:"flex flex-col gap-6 h-full max-h-[90%]",children:[(0,t.jsxs)("div",{className:`p-8 flex flex-col justify-center items-center flex-1 rounded-3xl shadow-xl w-full transition-colors duration-300 ${v?"bg-emerald-600":"bg-emerald-600/90"}`,children:[(0,t.jsx)("span",{className:`text-xl font-bold uppercase tracking-widest block mb-6 ${v?"text-emerald-100":"text-white/70"}`,children:"Location"}),(0,t.jsx)("div",{className:`text-8xl xl:text-9xl font-black leading-tight break-words text-center ${v?"text-white":"text-white/50"}`,children:v?v.label:"-"})]}),(0,t.jsxs)("div",{className:`p-8 flex flex-col justify-center items-center flex-1 rounded-3xl shadow-xl w-full transition-colors duration-300 ${v?"bg-[#005496]":"bg-[#005496]/90"}`,children:[(0,t.jsx)("span",{className:`text-xl font-bold uppercase tracking-widest block mb-6 ${v?"text-blue-100":"text-white/70"}`,children:"Accuracy Rate"}),(0,t.jsx)("div",{className:`text-8xl xl:text-9xl font-black leading-tight break-words text-center ${v?"text-white":"text-white/50"}`,children:v?v.conf.toFixed(2):"-"})]})]})})]})}e.s(["default",()=>r])}]);